@model LSLS.ViewModels.TruckLocationViewModel

@{
    ViewBag.Title = "SearchTruckId";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    #map {
        height: 500px;
        width: 100%;
    }
</style>


<ul class="breadcrumb">
    <li>@Html.ActionLink("Home", "Main", "Account")</li>
    <li>@Html.ActionLink("Truck Tracking", "TruckTracking", "TruckTracking")</li>
    <li class="active">Search TruckId Tracking</li>
</ul>

<div class="container-fluid body-content">
    <div class="row">

        <div class="col-md-5">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4>
                        <strong>@Html.DisplayFor(model => model.TruckId)</strong>
                    </h4>
                </div>
                <div class="panel-body">
                    
                    <ul class="list-group">
                        <li class="list-group-item">
                            <span class="badge">@Html.DisplayFor(model => model.TruckDriverFullname)</span>
                            Fullname
                        </li>
                        <li class="list-group-item">
                            <span class="badge">@Html.DisplayFor(model => model.TruckCurrentTime)</span>
                            Last Updated
                        </li>
                        <li class="list-group-item">
                            <span class="badge">
                                @Html.DisplayFor(model => model.TruckCurrentAddress)
                            </span>
                            Current Address
                        </li>
                    </ul>
                </div>
            </div>
            @Html.ActionLink("Back To Truck Tracking", "TruckTracking", "TruckTracking", new { @class = "btn btn-primary btn-block" })
        </div>

        <div class="col-md-7">
            <div class="panel panel-default">
                <div class="panel-heading">Map</div>
                <div id="map"></div>
            </div>
        </div>

    </div>

</div>

    <script>
    var data = @Html.Raw(Json.Encode(Model));

    function initMap() {

        var myLatlng = new google.maps.LatLng(data.Latitude, data.Longitude);
        var mapOptions = {
            zoom: 16,
            center: myLatlng
        };
        var map = new google.maps.Map(document.getElementById('map'), mapOptions);

        var marker = new google.maps.Marker({
            position: myLatlng,
            map: map
        });
        marker.setIcon('http://maps.google.com/mapfiles/ms/micons/green-dot.png');

        var infowindow;
        google.maps.event.addListener(marker,
            'click',
            function() {
                if (infowindow) infowindow.close();
                infowindow = new google.maps.InfoWindow({
                    content: "<div class='infoDiv'><h3> TruckID: " + data.TruckId + "</h3>" +"<h4>Fullname: "+ data.TruckDriverFullname+"</h4>"+"</br>Address: " + data.TruckCurrentAddress +"</div>"
                });
                infowindow.open(map, marker);
            });
    }

    </script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCzxtZCeSypA1WNa4foGcKlir1Kmj3LjA4&callback=initMap">
    </script>
